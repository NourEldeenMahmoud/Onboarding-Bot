# Onboarding Bot - Discord Bot

## 🎭 وصف البوت

بوت Discord متخصص في ترحيب الأعضاء الجدد وإنشاء قصص شخصية لهم باستخدام الذكاء الاصطناعي. البوت مصمم لسيرفرات المافيا والـ Roleplay.

## ✨ المميزات الجديدة

### 🔧 التحسينات الأخيرة
- **إصلاح مشكلة الـ Invite المجهول**: البوت الآن يظهر بوضوح من دعا كل عضو
- **معالجة الأعضاء القدامى**: البوت يتعرف على الأعضاء الذين لديهم قصص مسبقة ويرحب بهم بدون إعادة التسجيل
- **تتبع معلومات الدعوات**: حفظ معلومات الدعوات في ملف منفصل للرجوع إليها لاحقاً
- **أمر جديد `/invite`**: لعرض معلومات الدعوة لأي عضو
- **تحسين رسائل الترحيب**: رسائل أكثر وضوحاً وتفصيلاً

### 🎯 المميزات الأساسية
- **إنشاء قصص شخصية**: استخدام OpenAI لإنشاء قصص مخصصة لكل عضو
- **نظام الأسئلة التفاعلي**: أسئلة في قناة مخصصة للتعرف على الأعضاء الجدد
- **نظام الرولز التلقائي**: إعطاء رولز بناءً على إجابة الأسئلة
- **تتبع الدعوات**: معرفة من دعا كل عضو
- **أوامر Slash**: أوامر سهلة الاستخدام

## 🚀 التثبيت والتشغيل

### المتطلبات
- .NET 8.0
- Discord Bot Token
- OpenAI API Key

### متغيرات البيئة المطلوبة
```env
DISCORD_TOKEN=your_discord_bot_token
OPENAI_KEY=your_openai_api_key
STORY_CHANNEL_ID=channel_id_for_stories
JOIN_FAMILY_CHANNEL_ID=channel_id_for_onboarding
OWNER_ID=your_discord_user_id
LOG_CHANNEL_ID=channel_id_for_logs
ASSOCIATE_ROLE_ID=role_id_for_associates
OUTSIDER_ROLE_ID=role_id_for_outsiders
```

### خطوات التشغيل
1. انسخ ملف `.env.example` إلى `.env` واملأ المتغيرات
2. شغل الأمر: `dotnet run`
3. البوت سيعمل تلقائياً ويبدأ في مراقبة انضمام الأعضاء

## 📋 الأوامر المتاحة

### `/story @user`
عرض قصة عضو معين

### `/invite @user`
عرض معلومات الدعوة لعضو معين (من دعاه، كود الدعوة، تاريخ الانضمام)

## 🔧 كيفية العمل

### للأعضاء الجدد:
1. عند انضمام عضو جديد، البوت يتحقق من وجود قصة مسبقة
2. إذا لم توجد قصة، يبدأ عملية الأسئلة في قناة Join the Family
3. بعد الإجابة على الأسئلة، يتم إنشاء قصة شخصية
4. يتم إعطاء رول مناسب بناءً على الإجابات

### للأعضاء القدامى:
1. البوت يتعرف على الأعضاء الذين لديهم قصص مسبقة
2. يرسل رسالة ترحيب خاصة بدون إعادة التسجيل
3. يعطي رول Associate تلقائياً

### تتبع الدعوات:
1. البوت يحفظ معلومات كل دعوة في ملف `invite_history.json`
2. يمكن معرفة من دعا أي عضو باستخدام أمر `/invite`
3. معلومات الدعوة تظهر في القصص المنشورة

## 📁 ملفات البيانات

- `stories.json`: قصص الأعضاء
- `invite_history.json`: تاريخ الدعوات
- `.env`: متغيرات البيئة

## 🛠️ التحسينات التقنية

- إزالة الاعتماد على ASP.NET Core (تبسيط البوت)
- تحسين معالجة الأخطاء
- إزالة الدوال غير المستخدمة
- تحسين تتبع الـ Invites
- إصلاح مشاكل التسمية المتغيرة

## 📞 الدعم

لأي استفسارات أو مشاكل، يرجى التواصل مع المطور.




